<!doctype html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D"> 
 <head> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover"> 
  <meta name="referrer" content="unsafe-url"> 
  <title>Защита от всплесков при агрегации трафика в пакетных брокерах / Комментарии / Хабр</title> 
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* non-breaking hyphen */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/l/font?kit=KFOlCnqEu92Fr1MmEU9vBh0_IsHAlmrO6g&skey=ee881451c540fdec&v=v29) format('woff2');
      unicode-range: U+02011;
    }
  </style> 
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.961b6771.css" as="style">
  <link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.55ca5167.js" as="script">
  <link rel="preload" href="https://assets.habr.com/habr-web/css/app.d1834a6b.css" as="style">
  <link rel="preload" href="https://assets.habr.com/habr-web/js/app.69ba180e.js" as="script">
  <link rel="preload" href="https://assets.habr.com/habr-web/css/page-article-comments.5497aa9d.css" as="style">
  <link rel="preload" href="https://assets.habr.com/habr-web/js/page-article-comments.97bb766a.js" as="script"> 
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.961b6771.css">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.d1834a6b.css">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/page-article-comments.5497aa9d.css"> 
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.2822d469ec31a56409ac330bbcf7fcbf.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script> 
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script> 
  <style>.grecaptcha-badge{visibility: hidden;}</style> 
  <meta name="habr-version" content="2.66.0"> 
  <meta data-vue-meta="ssr" itemprop="image" content="/img/habr_ru.png" data-vmid="image:itemprop">
  <meta data-vue-meta="ssr" property="og:image" content="/img/habr_ru.png" data-vmid="og:image">
  <meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width">
  <meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <meta data-vue-meta="ssr" property="aiturec:image" content="/img/habr_ru.png" data-vmid="aiturec:image">
  <meta data-vue-meta="ssr" name="twitter:image" content="/img/habr_ru.png" data-vmid="twitter:image">
  <meta data-vue-meta="ssr" property="vk:image" content="/img/habr_ru.png?format=vk" data-vmid="vk:image">
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613">
  <meta data-vue-meta="ssr" property="fb:pages" content="472597926099084">
  <meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image">
  <meta data-vue-meta="ssr" name="twitter:site" content="@habr_com">
  <meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale">
  <meta data-vue-meta="ssr" property="og:type" content="website" data-vmid="og:type">
  <meta data-vue-meta="ssr" property="og:site_name" content="Хабр" data-vmid="og:site_name">
  <meta data-vue-meta="ssr" property="og:title" content="Хабр" data-vmid="og:title">
  <meta data-vue-meta="ssr" property="og:url" content="https://habr.com/ru/company/dsol/blog/655251/comments/" data-vmid="og:url"> 
  <link data-vue-meta="ssr" image_src="image" href="/img/habr_ru.png" data-vmid="image:href">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/655251/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss">
  <link data-vue-meta="ssr" href="https://habr.com/ru/company/dsol/blog/655251/" rel="canonical" data-vmid="canonical">
  <link data-vue-meta="ssr" data-vmid="hreflang"> 
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44"> 
  <meta name="msapplication-TileColor" content="#629FBC"> 
  <meta name="apple-mobile-web-app-capable" content="yes"> 
  <meta name="mobile-web-app-capable" content="yes"> 
  <link rel="shortcut icon" type="image/png" sizes="16x16" href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"> 
  <link rel="shortcut icon" type="image/png" sizes="32x32" href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"> 
  <link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"> 
  <link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"> 
  <link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"> 
  <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"> 
  <link rel="apple-touch-icon" type="image/png" sizes="256x256" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"> 
  <link rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"> 
  <link rel="mask-icon" color="#77a2b6" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"> 
  <link crossorigin="use-credentials" href="/manifest.webmanifest" rel="manifest"> 
 </head> 
 <body> 
  <div id="app" data-server-rendered="true" data-async-called="true">
   <div class="tm-layout__wrapper">
    <!----> 
    <div></div> <!----> 
    <header class="tm-header">
     <div class="tm-page-width">
      <div class="tm-header__container">
       <!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru">
         <svg height="16" width="16" class="tm-svg-img tm-header__icon">
          <title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use>
         </svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> 
       <div class="tm-dropdown tm-header__projects">
        <div class="tm-dropdown__head">
         <button class="tm-header__dropdown-toggle">
          <svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown">
           <title>Открыть список</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#arrow-down"></use>
          </svg></button>
        </div> <!---->
       </div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn"> Как стать автором </a> <!----> <a href="https://effect.habr.com/a/E73j5Fr4O-142fgehWBkgSYhmn5ZRacku7beakZ3hv54EdbWEfLT97djoyD-hj0yCVxRKwwSSsU098-iNgpc2lmoKiwVB6N_1YR9jWcHYGiGmPxdqrNlkZhBzbo_vy_QYhmIy0w7PQ" target="_blank" class="tm-top-link" style="color:#99ddff;"> Как COVID отрывается на IT: тренды и новое исследование </a> <!---->
      </div>
     </div>
    </header> 
    <div class="tm-layout">
     <div class="tm-page-progress-bar"></div> 
     <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky">
      <div class="tm-page-width">
       <div class="tm-base-layout__header-wrapper">
        <div class="tm-main-menu">
         <div class="tm-main-menu__section">
          <nav class="tm-main-menu__section-content">
           <!----> <a href="/ru/flows/all" class="tm-main-menu__item"> Все потоки </a> <a href="/ru/flows/develop/" class="tm-main-menu__item"> Разработка </a><a href="/ru/flows/admin/" class="tm-main-menu__item"> Администрирование </a><a href="/ru/flows/design/" class="tm-main-menu__item"> Дизайн </a><a href="/ru/flows/management/" class="tm-main-menu__item"> Менеджмент </a><a href="/ru/flows/marketing/" class="tm-main-menu__item"> Маркетинг </a><a href="/ru/flows/popsci/" class="tm-main-menu__item"> Научпоп </a>
          </nav>
         </div>
        </div> 
        <div class="tm-header-user-menu tm-base-layout__user-menu">
         <a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search">
          <svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark">
           <title>Поиск</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#search"></use>
          </svg></a> <!----> <!----> <!----> 
         <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop">
          <div class="tm-dropdown">
           <div class="tm-dropdown__head">
            <svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon">
             <title>Профиль</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#header-user"></use>
            </svg> <!---->
           </div> <!---->
          </div> <!---->
         </div> <!---->
        </div>
       </div>
      </div>
     </div> <!----> 
     <div class="tm-page-width"></div> 
     <main class="tm-layout__container">
      <div hl="ru" companyname="dsol" data-async-called="true" class="tm-page">
       <div class="tm-page-width">
        <!----> 
        <div class="tm-page__wrapper">
         <div class="tm-page__main tm-page__main_has-sidebar">
          <div class="pull-down">
           <div class="pull-down__header" style="height:0px;">
            <div class="pull-down__content" style="bottom:10px;">
             <svg height="24" width="24" class="tm-svg-img pull-down__arrow">
              <title>Обновить</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#pull-arrow"></use>
             </svg>
            </div>
           </div> 
           <article class="tm-article-comments__article-body">
            <div class="tm-article-comments__article-snippet">
             <div class="tm-article-snippet">
              <div class="tm-article-snippet__meta-container">
               <div class="tm-article-snippet__meta">
                <span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/DSol/" title="DSol" class="tm-user-info__userpic">
                  <div class="tm-entity-image">
                   <img alt="" height="24" src="//habrastorage.org/r/w32/getpro/habr/avatars/13a/b81/411/13ab814111272c7e00be45e04ab6e679.png" width="24" class="tm-entity-image__pic">
                  </div></a> <span class="tm-user-info__user"><a href="/ru/users/DSol/" class="tm-user-info__username"> DSol </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2022-03-11T16:27:12.000Z" title="2022-03-11, 19:27">вчера в 19:27</time></span>
               </div> <!---->
              </div> 
              <h1 class="tm-article-snippet__title tm-article-snippet__title_h1"><a href="/ru/company/dsol/blog/655251/" data-article-link="" class="tm-article-snippet__title-link router-link-active"><span>Защита от всплесков при агрегации трафика в пакетных брокерах</span></a></h1> 
              <div class="tm-article-snippet__hubs">
               <span class="tm-article-snippet__hubs-item"><a href="/ru/company/dsol/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании НПП «Цифровые решения»</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/infosecurity/" class="tm-article-snippet__hubs-item-link"><span>Информационная безопасность</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/it-infrastructure/" class="tm-article-snippet__hubs-item-link"><span>IT-инфраструктура</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/network_technologies/" class="tm-article-snippet__hubs-item-link"><span>Сетевые технологии</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/network_hardware/" class="tm-article-snippet__hubs-item-link"><span>Сетевое оборудование</span> <!----></a></span>
              </div> <!----> <!----> <!---->
             </div> 
             <div class="tm-data-icons">
              <!----> 
              <div class="tm-votes-meter tm-data-icons__item">
               <svg height="24" width="24" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_appearance-article">
                <title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-rating"></use>
               </svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating">+1</span>
              </div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item">
               <svg height="24" width="24" class="tm-svg-img tm-icon-counter__icon">
                <title>Просмотры</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-views"></use>
               </svg> <span class="tm-icon-counter__value">255</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon">
                <svg height="24" width="24" class="tm-svg-img tm-svg-icon">
                 <title>Добавить в закладки</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-favorite"></use>
                </svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter"> 0 </span></button> 
              <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item">
               <a href="/ru/company/dsol/blog/655251/comments/" aria-current="page" class="tm-article-comments-counter-link__link">
                <svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon">
                 <title>Комментарии</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-comments"></use>
                </svg> <span class="tm-article-comments-counter-link__value"> 0 </span></a> <!---->
              </div> <!----> 
              <div class="v-portal" style="display:none;"></div>
             </div>
            </div>
           </article> <!----> 
           <div data-async-called="true" class="tm-article-comments-offloaded">
            <div class="tm-article-comments">
             <div class="tm-comments-wrapper">
              <div class="tm-comments-wrapper__wrapper">
               <header class="tm-comments-wrapper__header">
                <h2 class="tm-comments-wrapper__title"> Комментарии <!----></h2> 
                <div class="tm-comments-wrapper__header-aside">
                 <!----> <button class="tm-rss-button tm-rss-button_comments-header"><span class="tm-svg-icon__wrapper tm-rss-button__icon">
                   <svg height="16" width="16" class="tm-svg-img tm-svg-icon">
                    <title>Скопировать ссылку на RSS</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#rss"></use>
                   </svg></span></button> <!---->
                </div>
               </header> 
               <div class="tm-comments-wrapper__inner"> 
                <div class="tm-comments__empty">
                 <span>Здесь пока нет ни одного комментария, вы&nbsp;можете&nbsp;стать&nbsp;первым!</span>
                </div> 
                <div class="v-portal" style="display:none;"></div>
               </div>
              </div> 
              <div class="tm-notice tm-comments__comment-notice tm-notice_positive">
               <!----> 
               <div class="tm-notice__inner">
                <!----> 
                <div class="tm-notice__content">
                 <span>Только полноправные пользователи могут оставлять комментарии. <a rel="nofollow" href="/kek/v1/auth/habrahabr/?back=/ru/company/dsol/blog/655251/comments/&amp;hl=ru">Войдите</a>, пожалуйста.</span>
                </div>
               </div>
              </div>
             </div>
            </div>
           </div> <!----> <!---->
          </div>
         </div> 
         <div class="tm-page__sidebar">
          <div hl="ru" class="tm-layout-sidebar">
           <div class="tm-layout-sidebar__placeholder_initial"></div> 
           <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;">
            <!----> <!----> <!---->
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </main> <!---->
    </div> 
    <div class="tm-footer-menu">
     <div class="tm-page-width">
      <div class="tm-footer-menu__container">
       <div class="tm-footer-menu__block">
        <h3 class="tm-footer-menu__block-title"> Ваш аккаунт </h3> 
        <div class="tm-footer-menu__block-content">
         <ul class="tm-footer-menu__list">
          <li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/dsol/blog/655251/comments/&amp;hl=ru" rel="nofollow" target="_self"> Войти </a></li>
          <li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/dsol/blog/655251/comments/&amp;hl=ru" rel="nofollow" target="_self"> Регистрация </a></li>
         </ul>
        </div>
       </div>
       <div class="tm-footer-menu__block">
        <h3 class="tm-footer-menu__block-title"> Разделы </h3> 
        <div class="tm-footer-menu__block-content">
         <ul class="tm-footer-menu__list">
          <li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active"> Публикации </a></li>
          <li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link"> Новости </a></li>
          <li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link"> Хабы </a></li>
          <li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link"> Компании </a></li>
          <li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link"> Авторы </a></li>
          <li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link"> Песочница </a></li>
         </ul>
        </div>
       </div>
       <div class="tm-footer-menu__block">
        <h3 class="tm-footer-menu__block-title"> Информация </h3> 
        <div class="tm-footer-menu__block-content">
         <ul class="tm-footer-menu__list">
          <li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link"> Устройство сайта </a></li>
          <li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link"> Для авторов </a></li>
          <li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link"> Для компаний </a></li>
          <li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link"> Документы </a></li>
          <li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank"> Соглашение </a></li>
          <li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank"> Конфиденциальность </a></li>
         </ul>
        </div>
       </div>
       <div class="tm-footer-menu__block">
        <h3 class="tm-footer-menu__block-title"> Услуги </h3> 
        <div class="tm-footer-menu__block-content">
         <ul class="tm-footer-menu__list">
          <li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank"> Реклама </a></li>
          <li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank"> Тарифы </a></li>
          <li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank"> Контент </a></li>
          <li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank"> Семинары </a></li>
          <li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link"> Мегапроекты </a></li>
         </ul>
        </div>
       </div>
      </div>
     </div>
    </div> 
    <div class="tm-footer">
     <div class="tm-page-width">
      <div class="tm-footer__container">
       <!----> 
       <div class="tm-footer__social">
        <a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon">
         <svg height="16" width="16" class="tm-svg-img tm-svg-icon">
          <title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use>
         </svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon">
         <svg height="16" width="16" class="tm-svg-img tm-svg-icon">
          <title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use>
         </svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon">
         <svg height="16" width="16" class="tm-svg-img tm-svg-icon">
          <title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use>
         </svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon">
         <svg height="16" width="16" class="tm-svg-img tm-svg-icon">
          <title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use>
         </svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon">
         <svg height="16" width="16" class="tm-svg-img tm-svg-icon">
          <title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use>
         </svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon">
         <svg height="16" width="16" class="tm-svg-img tm-svg-icon">
          <title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use>
         </svg></a>
       </div> 
       <div class="v-portal" style="display:none;"></div> <button class="tm-footer__link"><!----> Настройка языка </button> <a href="/ru/about" class="tm-footer__link"> О сайте </a> <a href="/ru/feedback/" class="tm-footer__link"> Техническая поддержка </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link"> Вернуться на старую версию </a> 
       <div class="tm-footer-copyright">
        <span class="tm-copyright"><span class="tm-copyright__years">© 2006–2022 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span>
       </div>
      </div>
     </div>
    </div> <!----> <!---->
   </div> 
   <div class="vue-portal-target"></div>
  </div> 
  <script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"655251":{"id":"655251","timePublished":"2022-03-11T16:27:12+00:00","isCorporative":true,"lang":"ru","titleHtml":"Защита от всплесков при агрегации трафика в пакетных брокерах","leadData":{"textHtml":"\u003Cp\u003EСовременный подход к подключению средств мониторинга и информационной безопасности к сетевой инфраструктуре предполагает использование ответвителей трафика и брокеров сетевых пакетов. Для обеспечения полной видимости трафика в сети (главное условие корректной работы систем мониторинга и адекватных результатов анализа) крайне важно не только ответвить трафик с нужных точек на пакетный брокер, но и передать его без потерь после предобработки на эти системы. Сегодня мы поговорим про функцию агрегации в пакетном брокере - одной из самых востребованных в данном классе оборудования. С помощью этой функции осуществляется сбор трафика с низконагруженных сетевых интерфейсов (согласно предварительно настроенному разделению входных портов по независимым группам агрегации с индивидуальными правилами распределения трафика в них) и дальнейшая передача в один или несколько выходных портов.\u003C\u002Fp\u003E\u003Cp\u003EАгрегация каналов достаточно чувствительна к всплескам трафика, в результате чего могут происходить потери пакетов. В этой статье мы расскажем, как столкнулись с данной проблемой в одном из проектов, что такое всплески трафика, и как функция защиты от всплесков помогает решить проблему потери пакетов.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa83\u002Faa6\u002F365\u002Fa83aa636599270953447a9223ec7b73d.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa83\u002Faa6\u002F365\u002Fa83aa636599270953447a9223ec7b73d.png","fit":"cover","positionY":4.7727272727273,"positionX":48.589743589744}},"editorVersion":"2.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":9,"votesCount":13},"rating":1,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"2295655","alias":"DSol","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F13a\u002Fb81\u002F411\u002F13ab814111272c7e00be45e04ab6e679.png","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":0,"readingCount":255,"score":1,"votesCount":1},"hubs":[{"relatedData":null,"id":"22412","alias":"dsol","type":"corporative","title":"Блог компании НПП «Цифровые решения»","titleHtml":"Блог компании НПП «Цифровые решения»","isProfiled":false},{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"6398","alias":"it-infrastructure","type":"collective","title":"IT-инфраструктура","titleHtml":"IT-инфраструктура","isProfiled":true},{"relatedData":null,"id":"17123","alias":"network_technologies","type":"collective","title":"Сетевые технологии","titleHtml":"Сетевые технологии","isProfiled":true},{"relatedData":null,"id":"21958","alias":"network_hardware","type":"collective","title":"Сетевое оборудование","titleHtml":"Сетевое оборудование","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9e2\u002F4be\u002F99e\u002F9e24be99e20608db1c75daa41ad6f75c.png\" width=\"5848\" height=\"2848\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9e2\u002F4be\u002F99e\u002F9e24be99e20608db1c75daa41ad6f75c.png\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EСовременный подход к подключению средств мониторинга и информационной безопасности к сетевой инфраструктуре предполагает использование ответвителей трафика и брокеров сетевых пакетов. Для обеспечения полной видимости трафика в сети (главное условие корректной работы систем мониторинга и адекватных результатов анализа) крайне важно не только ответвить трафик с нужных точек на пакетный брокер, но и передать его без потерь после предобработки на эти системы. Сегодня мы поговорим про функцию агрегации в пакетном брокере - одной из самых востребованных в данном классе оборудования. С помощью этой функции осуществляется сбор трафика с низконагруженных сетевых интерфейсов (согласно предварительно настроенному разделению входных портов по независимым группам агрегации с индивидуальными правилами распределения трафика в них) и дальнейшая передача в один или несколько выходных портов.\u003C\u002Fp\u003E\u003Cp\u003EАгрегация каналов достаточно чувствительна к всплескам трафика, в результате чего могут происходить потери пакетов. В этой статье мы расскажем, как столкнулись с данной проблемой в одном из проектов, что такое всплески трафика, и как функция защиты от всплесков помогает решить проблему потери пакетов.\u003C\u002Fp\u003E\u003Ch2\u003EКейс применения\u003C\u002Fh2\u003E\u003Cp\u003EРаботая над одним из проектов, нам попалась (как изначально казалось) тривиальная задача - передать трафик, полученный с четырёх оптических ответвителей (TAP), на один порт системы ИБ. Для её реализации был задействован брокер сетевых пакетов DS Integrity NG с функцией агрегации. Схема подключения была организована следующим образом (рисунок 1): на восемь входных интерфейсов 10G пакетного брокера поступал трафик, агрегировался и передавался на один выходной интерфейс 10G. Загруженность каждого из четырех линков составляла порядка 10%, и весь трафик при агрегации умещался в один выходной интерфейс с запасом.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3ee\u002F204\u002F8d9\u002F3ee2048d91dcda682b0995be0abadeed.png\" alt=\"Рисунок 1\" title=\"Рисунок 1\" width=\"5188\" height=\"2375\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3ee\u002F204\u002F8d9\u002F3ee2048d91dcda682b0995be0abadeed.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 1\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПосле монтажа указанной схемы было проведено тестирование её работы, в результате которого с помощью встроенного в Web-интерфейс пакетного брокера счетчика отброшенных пакетов мы заметили потерю пакетов. Причина потери пакетов заключалась в переполнении внутреннего буфера коммутационной матрицы из-за всплесков трафика.\u003C\u002Fp\u003E\u003Cp\u003EДля таких случаев в брокере сетевых пакетов DS Integrity NG предусмотрена функция защиты от всплесков. При включении функции защиты от всплесков потери пакетов прекратились. Рассмотрим далее, что такое всплески трафика и как работает функция защиты от них.\u003C\u002Fp\u003E\u003Ch2\u003EВсплески трафика на сети\u003C\u002Fh2\u003E\u003Cp\u003EДля начала давайте разберемся, как осуществляется передача пакетов в сети. Все данные от различных приложений, которые работают на конечных хостах (пользовательское оборудование, серверы), перед отправкой в сеть поступают из центрального процессора на сетевую карту. Следует учесть, что интерфейс между процессором и сетевой картой более скоростной, чем между сетевой картой и сетью. Поэтому данные, поступающие от процессора, невозможно сразу обработать и отправить, следовательно, они будут ожидать обработки в буфере сетевой карты. Сама же сетевая карта берет данные из своего буфера, упаковывает их в пакеты, а затем каждый пакет последовательно и с постоянной скоростью отправляет в сеть.\u003C\u002Fp\u003E\u003Cp\u003EПроцесс передачи пакетов (рисунок 2) останавливается только тогда, когда заканчиваются данные в буфере. Из-за чего это происходит? Всё дело в специфике работы приложений. Приложения, а, следовательно, и сетевая карта будет передавать пакеты, пока не будет обработан свой или чужой запрос. Следует учесть, что на одном хосте располагаются до сотни различных приложений, и все они могут одновременно принимать либо отправлять запросы.\u003C\u002Fp\u003E\u003Cp\u003EНа рисунке 2а показан график передачи пакетов сетевой картой. Как мы видим, все пакеты передаются последовательно с одинаковой скоростью. Пробелы в передаче пакетов обусловлены спецификой работы приложений - в определённый момент времени сетевая карта либо загружена, либо пакеты для передачи отсутствуют. Эти же данные можно представить в виде графика пропускной способности линка 2б, к которому все мы привыкли. На нём наблюдаются всплески трафика в тех местах, где последовательно было передано большое количество пакетов, и падение в тот момент, когда сетевая карта не передавала пакеты. Также следует учесть, что данный график является аппроксимацией и поэтому, когда между передачей пакетов образуется пауза, пропускная способность линка не падает до нуля.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F044\u002F13a\u002F558\u002F04413a558b7e28742e3a6986251add7b.png\" alt=\"Рисунок 2 - Передача пакетов и всплески трафика\" title=\"Рисунок 2 - Передача пакетов и всплески трафика\" width=\"4106\" height=\"3456\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F044\u002F13a\u002F558\u002F04413a558b7e28742e3a6986251add7b.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 2 - Передача пакетов и всплески трафика\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EИсходя из всего описанного, можно сказать, что всплеском трафика является кратковременная загрузка полосы пропускания линка вследствие одновременной работы нескольких десятков, а то и сотен приложений.\u003C\u002Fp\u003E\u003Ch2\u003EФункция защиты от всплесков\u003C\u002Fh2\u003E\u003Cp\u003EФункция защиты от всплесков трафика основывается на использовании дополнительного буфера. При всплесках трафика на нескольких агрегируемых линках происходит заполнение основного буфера, как следствие пакетам некуда сохраняться, они отбрасываются. При использовании функции защиты от всплесков пакеты не отбрасываются, а сохраняются в дополнительный буфер и ожидают своей очереди на передачу. Размер дополнительного буфера составляет 8 Гбайт.\u003C\u002Fp\u003E\u003Cp\u003EРешение задачи по защите от всплесков трафика на агрегируемых линках является довольно важной для брокеров сетевых пакетов. Стоит отметить, что не у всех производителей пакетных брокеров имеется данный функционал.\u003C\u002Fp\u003E\u003Ch2\u003EЛабораторные испытания\u003C\u002Fh2\u003E\u003Cp\u003EТеперь, когда у Вас есть понимание о всплесках трафика и работе функции защиты от всплесков, мы расскажем, как проводится тестирование данного функционала.\u003C\u002Fp\u003E\u003Cp\u003EПакетный брокер конфигурируем следующим образом - на интерфейсы 8x10G поступает трафик, агрегируется и передаётся на выходной интерфейс 1x10G (рисунок 3), при этом функция защиты от всплесков выключена.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6ee\u002Fc71\u002F8ce\u002F6eec718cef249025be8647d0449d9956.png\" alt=\"Рисунок 3 - Схема стенда\" title=\"Рисунок 3 - Схема стенда\" width=\"5906\" height=\"2344\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6ee\u002Fc71\u002F8ce\u002F6eec718cef249025be8647d0449d9956.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 3 - Схема стенда\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EИмитация всплесков на агрегированных линках пакетного брокера происходит следующим образом: с помощью генератора трафика Spirent подаётся равномерный трафик на 6 интерфейсов с загрузкой каждого интерфейса на 15%, а на 2 других интерфейса кратковременно подаётся трафик с загрузкой на 50% каждого.\u003C\u002Fp\u003E\u003Cp\u003EВыполнив тест, мы убеждаемся в переполнении полосы выходного порта – буфер переполняется и пакеты отбрасываются. Ниже приведена статистика пакетов на входных (рисунок 4) и выходных портов с таблицей отброшенных пакетов (рисунок 5).\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F71d\u002Fee6\u002F448\u002F71dee644832541ffc77c7fa36ce3a482.jpg\" alt=\"Рисунок 4 - Вкладка входных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG\" title=\"Рисунок 4 - Вкладка входных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG\" width=\"1025\" height=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F71d\u002Fee6\u002F448\u002F71dee644832541ffc77c7fa36ce3a482.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003EРисунок 4 - Вкладка входных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe2f\u002F740\u002Febf\u002Fe2f740ebf7a30e0ffce42d5aa0b86522.png\" alt=\"Рисунок 5 - Вкладка выходных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG \" title=\"Рисунок 5 - Вкладка выходных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG \" width=\"801\" height=\"427\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe2f\u002F740\u002Febf\u002Fe2f740ebf7a30e0ffce42d5aa0b86522.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 5 - Вкладка выходных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG \u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EНа рисунке 6 представлен график данного теста. При загрузке линка и имитации кратковременных всплесков мы видим потери пакетов. Когда кратковременный всплеск заканчивается, график приходит к исходному состоянию – буфер принимает все поступающие пакеты, и соответственно, потери прекращаются.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F022\u002Fc73\u002Fa74\u002F022c73a7464e7b4216515ae2aece092b.png\" alt=\"Рисунок 6 - Потери пакетов при всплесках трафика\" title=\"Рисунок 6 - Потери пакетов при всплесках трафика\" width=\"614\" height=\"270\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F022\u002Fc73\u002Fa74\u002F022c73a7464e7b4216515ae2aece092b.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 6 - Потери пакетов при всплесках трафика\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EДля предотвращения потери пакетов включим в брокере сетевых пакетов функцию защиты от всплесков и повторим тест. Для имитации всплесков увеличиваем загрузку двух интерфейсов до 100% и убеждаемся в отсутствии потерь. Ниже приведена статистика пакетов на входных (рисунок 7) и выходных портах с таблицей отброшенных пакетов (рисунок 8).\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb2a\u002F721\u002F4ce\u002Fb2a7214ce4a508510760ab8a0374f1f3.png\" alt=\"Рисунок 7 - Вкладка входных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG\" title=\"Рисунок 7 - Вкладка входных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG\" width=\"1032\" height=\"372\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb2a\u002F721\u002F4ce\u002Fb2a7214ce4a508510760ab8a0374f1f3.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 7 - Вкладка входных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F52d\u002Fe2f\u002Fb9e\u002F52de2fb9e1c1a15014137a2ca9b291aa.png\" alt=\"Рисунок 8 - Вкладка выходных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG\" title=\"Рисунок 8 - Вкладка выходных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG\" width=\"824\" height=\"488\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F52d\u002Fe2f\u002Fb9e\u002F52de2fb9e1c1a15014137a2ca9b291aa.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 8 - Вкладка выходных портов Web-интерфейса брокера сетевых пакетов DS Integrity NG\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПереполнение полосы выходного порта во время всплесков нивелируется большей полосой дополнительного буфера, таким образом удается избежать потери пакетов. На рисунке 9 представлен график передачи трафика при включенной функции защиты от всплесков. В данном случае пакеты аккумулируются в дополнительном буфере и, когда кратковременный всплеск заканчивается, постепенно поступают на выходной порт из дополнительного буфера.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdf7\u002F24f\u002Fdb5\u002Fdf724fdb572367a5fc3a04ebdf450ee1.png\" alt=\"Рисунок 9 - Отсутствие потерь пакетов при всплесках трафика\" title=\"Рисунок 9 - Отсутствие потерь пакетов при всплесках трафика\" width=\"4556\" height=\"1688\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdf7\u002F24f\u002Fdb5\u002Fdf724fdb572367a5fc3a04ebdf450ee1.png\"\u002F\u003E\u003Cfigcaption\u003EРисунок 9 - Отсутствие потерь пакетов при всплесках трафика\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EНаличие функции защиты от всплесков позволяет хранить пакеты в дополнительном буфере до тех пор, пока не освободится место в очереди, только после этого пакет будет отправлен.\u003C\u002Fp\u003E\u003Cp\u003EИспользование функции защиты от всплесков наглядно показывает, что при всплесках агрегированного трафика пакеты все равно будут равномерно поступать через брокер сетевых пакетов на устройства мониторинга и информационной безопасности или любые другие подключенные к нему системы.\u003C\u002Fp\u003E\u003Chr\u002F\u003E\u003Ch2\u003EВместо заключения\u003C\u002Fh2\u003E\u003Cp\u003EРассмотрев работу функции защиты от всплесков при агрегации линков, можно сделать вывод, что её использование в пакетных брокерах позволит избежать потери пакетов при всплесках трафика. Данная функция позволяет сделать более эффективным функционирование средств, работа которых основана на анализе сетевого трафика. Среди плюсов реализации функции защиты от всплесков DS Integrity NG, по сравнению с зарубежными аналогами, можно выделить больший объем дополнительного буфера, работу со всеми видами интерфейсов, а также наличие расширенной статистики по трафику с возможностью мониторинга по отброшенным пакетам.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"сетевые технологии"},{"titleHtml":"агрегация данных"},{"titleHtml":"информационная безопасность"},{"titleHtml":"отслеживание трафика"},{"titleHtml":"потеря пакетов"},{"titleHtml":"информационная безопаность"},{"titleHtml":"брокеры сетевых пакетов"},{"titleHtml":"анализ трафика"},{"titleHtml":"буферизация"},{"titleHtml":"видимость сети"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa83\u002Faa6\u002F365\u002Fa83aa636599270953447a9223ec7b73d.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa83\u002Faa6\u002F365\u002Fa83aa636599270953447a9223ec7b73d.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fdsol\\\u002Fblog\\\u002F655251\\\u002F\"},\"headline\":\"Защита от всплесков при агрегации трафика в пакетных брокерах\",\"datePublished\":\"2022-03-11T19:27:12+03:00\",\"dateModified\":\"2022-03-11T21:52:09+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"DSol\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Современный подход к подключению средств мониторинга и информационной безопасности к сетевой инфраструктуре предполагает использование ответвителей трафика и бро...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fdsol\\\u002Fblog\\\u002F655251\\\u002F#post-content-body\",\"about\":[\"c_dsol\",\"h_infosecurity\",\"h_it-infrastructure\",\"h_network_technologies\",\"h_network_hardware\",\"f_develop\",\"f_admin\",\"f_popsci\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F655251\\\u002F3a372bc4f3e9953f96456c4f370e5888\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F9e2\\\u002F4be\\\u002F99e\\\u002F9e24be99e20608db1c75daa41ad6f75c.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F3ee\\\u002F204\\\u002F8d9\\\u002F3ee2048d91dcda682b0995be0abadeed.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F044\\\u002F13a\\\u002F558\\\u002F04413a558b7e28742e3a6986251add7b.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F6ee\\\u002Fc71\\\u002F8ce\\\u002F6eec718cef249025be8647d0449d9956.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F71d\\\u002Fee6\\\u002F448\\\u002F71dee644832541ffc77c7fa36ce3a482.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe2f\\\u002F740\\\u002Febf\\\u002Fe2f740ebf7a30e0ffce42d5aa0b86522.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F022\\\u002Fc73\\\u002Fa74\\\u002F022c73a7464e7b4216515ae2aece092b.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fb2a\\\u002F721\\\u002F4ce\\\u002Fb2a7214ce4a508510760ab8a0374f1f3.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F52d\\\u002Fe2f\\\u002Fb9e\\\u002F52de2fb9e1c1a15014137a2ca9b291aa.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fdf7\\\u002F24f\\\u002Fdb5\\\u002Fdf724fdb572367a5fc3a04ebdf450ee1.png\"]}","metaDescription":"Современный подход к подключению средств мониторинга и информационной безопасности к сетевой инфраструктуре предполагает использование ответвителей трафика и брокеров сетевых пакетов. Для обеспечения...","mainImageUrl":null,"amp":true,"customTrackerLinks":[]},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{"655251":{"refs":{},"root":[]}},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{"isCanComment":false,"cantCommentReasonKey":"AUTH_REQUIRED","cantCommentReason":"Authorization required","data":null},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"promoData":{"isLoading":false,"hasLoaded":true,"featurer":[],"megaposts":[{"title":"Как COVID отрывается на IT: тренды и новое исследование","color":"#99ddff","link":{"url":"https:\u002F\u002Feffect.habr.com\u002Fa\u002FE73j5Fr4O-142fgehWBkgSYhmn5ZRacku7beakZ3hv54EdbWEfLT97djoyD-hj0yCVxRKwwSSsU098-iNgpc2lmoKiwVB6N_1YR9jWcHYGiGmPxdqrNlkZhBzbo_vy_QYhmIy0w7PQ"},"events":{"view":"QrG_lfQ68WtqnOHcf_wt3gCP1GIez2AHM0mCfbiAW-Ks0W3KILyQNS11eXUhbtaZ_6X9peJnQEMjRw"}}],"promoLinks":[{"title":"Делаем торт вместе: собираем темы, которых вам не хватает на Хабре","label":"Опрос","external":false,"link":{"url":"https:\u002F\u002Feffect.habr.com\u002Fa\u002F8uQOcFg1H6vC7OhVnI4cyQI3JjTMCKjgTJD3ZNRWTcdHG8F-MUuyv5DnDzHFyv9w6r898-CE2YeHsSxaxcSz3MLW1AKcmHs7dHox1C5BYgPSC7VhtZszPeCxcFIa"},"events":{"view":"Ei3A0Mjf3r00oFclPSYMBo0VatIuH1mhoZsj95zPM2kw-jpSmoBrgFkYtsLkn1eayZwfJ3EFGkh7QA"}},{"title":"Собрали со всего Хабра самую полезную инфу о платёжных технологиях","label":"Коллекция","external":false,"link":{"url":"https:\u002F\u002Feffect.habr.com\u002Fa\u002Fz4lV7x_IPS-e7VnRBLqicxp_NyOSNB_OKz5nyDszNPxsaxOixgOf6bJCqufD872F1l4aptckpkfEtxa42SOPmWQ9EvqrKc_NFiX4pI8DDLKIpZ9i"},"events":{"view":"Su-GQY--kuw5LK5kSwOMFq_cjERHyr29jhLBfqsuStGPNFvzOAmDzoMddnq5GRHDoN77Vcr9FaB5qg"}}],"promoPosts":[{"title":"Промокод — твой билет в общество потребления","label":"Промо","external":false,"image":{"url":"https:\u002F\u002Feffect.habr.com\u002Fa\u002FSGIaQRQOWptbZ5_hyJDj6taPT9Bkg5hCXWC2VKIPVGUEcE7pfhTtZtaiAQAHWNS_d-T1-3-YpjonDuz-s8GLvRRUIyD87nY3z64h-1FSmy3T8FZNh4L72_z5Uj4lqjBDp2F0_pmB-fkVeM711MMWaXwkygAY8mNSiAzaoqaWiA7WSISknT1mi0rVQJ9HwCnoqudGAPXM8RAmAKnxO2aUFwCSXaOD"},"link":{"url":"https:\u002F\u002Feffect.habr.com\u002Fa\u002F57COVRpDpKOwOwVTsteqpPaBddGj3iUi8CDeBXfw0alhcQuw_LO0OBnNXjqI5D_AYR90Fd5RFNp8M28ok-yRQrR3bR38Zq_xZdj7EnWi2XL_irzFrBAS"}},{"title":"Конкурс технических статей Технотекст 2021","label":"Событие","external":false,"image":{"url":"https:\u002F\u002Feffect.habr.com\u002Fa\u002FDkohD6z5W6mBEVzeLhh8lzw8ch_NLe-N6bud8HZjVxZlX8JyYyAy_qGTegF8Cotma3STDlCu_zaHXhIiiCSF5ZieapkArbczTWut5qPW3bE5rnjcHtoVTwYS2Jd4_bIE1VcJ83xjdsZnWDRkLHNoDP06-X_c7uI3tYLU4NRrEzjc0XvcqO--QZTxn03JEMcOunVd9-3x2x5IGd3G2WUmcGMuOIIH"},"link":{"url":"https:\u002F\u002Feffect.habr.com\u002Fa\u002FkUAbJdAboUZLMOlIMwh5Op3wocXPsOqWhowY9EbzqUvJm8BwpgiwUjVT3OnqeeMvcZ64G-TM16lXGw0azXgGk5vM0efLoh9hJlejYJpCtyRHTw"}},{"title":"Хьюстон, на воркшопе этого не было: IT-обучение и космос","label":"Мегапост","external":false,"image":{"url":"https:\u002F\u002Feffect.habr.com\u002Fa\u002FWExsUH0l4Ku-7yEQlToPTbY5pKNVxpUteUEkv6yUKn_pvEKb4XOwmxPu9oXW3IkJ4ySis0A79KJY2m8m2z-C3z4JZI7TGiCGe-Ku-7uuNGYaXKY48KUFoXpkfAtC5pcGVIo6eDRJlHc0lWEiGx47j8dXqzXqTh_btuM90cOZGvIKFG-qGPKP6ef9cKLvueuhRd_9g8ZmlVyB1A"},"link":{"url":"https:\u002F\u002Feffect.habr.com\u002Fa\u002FhiB81gZUx4pbzXTsqm9P7ezLR43BQIrnprTr4PKz3-T2IXAO23FhHJ7IM79Vw5pjYt9kNt5yzn-GPqoWU_8n3v2SnJzJrR04plIsNE2qQDnqXRhgtk6ux1KD26uxqqshMVn66VI"}}]},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"technotext":{"nominationsList":[]},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script> 
  <script src="https://assets.habr.com/habr-web/js/chunk-vendors.55ca5167.js" defer></script>
  <script src="https://assets.habr.com/habr-web/js/page-article-comments.97bb766a.js" defer></script>
  <script src="https://assets.habr.com/habr-web/js/app.69ba180e.js" defer></script> 
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script> 
  <script type="text/javascript">
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script> 
  <noscript> 
   <div> 
    <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt=""> 
   </div> 
  </noscript> 
  <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script> 
  <script src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true"></script>  
 </body>
</html>